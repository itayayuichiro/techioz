<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="generator" content="pandoc">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
  <link rel="icon" href="../favicon.ico" />
  <link rel="stylesheet" href="../style.css">
  <title>Amazon Linux 2023 に Wkhtmltopdf をインストールするにはどうすればよいですか? | Techioz</title>
  <style type="text/css">code{white-space: pre;}</style>
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1637770322917058"
     crossorigin="anonymous"></script>
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-DRM1ZRNLDN"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-DRM1ZRNLDN');
  </script>
<script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "Article",
  "headline": "Amazon Linux 2023 に Wkhtmltopdf をインストールするにはどうすればよいですか?",
  "author": {
    "@type": "Person",
    "address": "",
    "email": null,
    "identifier": "masyumaroking",
    "name": "masyumaroking"
  },
  "publisher": {
    "@type": "Person",
    "name": "masyumaroking"
  }
}
</script>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
  <header>
    <div class="container">
        <h1>Techioz Blog</h1>
        <nav>
            <ul>
                <li><a href="#">Home</a></li>
                <li><a href="#">Articles</a></li>
                <li><a href="#">About</a></li>
                <li><a href="#">Contact</a></li>
            </ul>
        </nav>
    </div>
  </header>
  <main>
    <div class="container">
        <article>
                      <h2>Amazon Linux 2023 に Wkhtmltopdf
をインストールするにはどうすればよいですか?</h2>
                    <h2 id="概要">概要</h2>
                    <p>サーバーを AL2 から Amazon Linux 2023
                    にアップグレードしています。私のアプリケーションには
                    wkhtmltopdf
                    が必要ですが、それをインストールしようとすると、それが私の特定の
                    OS
                    バージョンでは正式にリリースされていないことがわかりました。すでに
                    AL2
                    のバージョンをインストールしようとしましたが、すべての依存関係をインストールした後でも
                    libpng が見つかりません。</p>
                    <p>AL2 aarch64 の下の
                    https://wkhtmltopdf.org/downloads.html から .rpm
                    ファイルをダウンロードして、 sudo yum install
                    wkhtmltox-0.12.6-1.amazonlinux2.aarch64.rpm
                    を実行してみました。正しくインストールされているようですが、サンプルの
                    wkhtmltopdf google.com google.pdf
                    を実行すると失敗します。 Amazon Linux 2023 で
                    wkhtmltopdf
                    を構築する方法について何かアイデアはありますか?</p>
                    <p>余談ですが。このライブラリに関連付けられた Github
                    リポジトリがアーカイブされているようですが、アプリケーションの
                    PDF
                    生成を別のライブラリに移行することを検討する必要がありますか?</p>
                    <pre><code>[ec2-user@backoffice ~]$ sudo yum install wkhtmltox-0.12.6-1.amazonlinux2.aarch64.rpm
Last metadata expiration check: 1:02:21 ago on Mon Nov 20 20:13:06 2023.
Dependencies resolved.
===========================================================================================================================================
 Package                                  Architecture           Version                                 Repository                   Size
===========================================================================================================================================
Installing:
 wkhtmltox                                aarch64                1:0.12.6-1.amazonlinux2                 @commandline                 13 M
Installing dependencies:
 cairo                                    aarch64                1.17.6-2.amzn2023.0.1                   amazonlinux                 669 k
 fontconfig                               aarch64                2.13.94-2.amzn2023.0.2                  amazonlinux                 278 k
 fonts-filesystem                         noarch                 1:2.0.5-12.amzn2023.0.2                 amazonlinux                 9.5 k
 freetype                                 aarch64                2.13.0-2.amzn2023.0.1                   amazonlinux                 412 k
 google-noto-fonts-common                 noarch                 20201206-2.amzn2023.0.2                 amazonlinux                  15 k
 google-noto-sans-vf-fonts                noarch                 20201206-2.amzn2023.0.2                 amazonlinux                 492 k
 graphite2                                aarch64                1.3.14-7.amzn2023.0.2                   amazonlinux                  93 k
 harfbuzz                                 aarch64                7.0.0-2.amzn2023.0.1                    amazonlinux                 843 k
 langpacks-core-font-en                   noarch                 3.0-21.amzn2023.0.4                     amazonlinux                  10 k
 libX11                                   aarch64                1.7.2-3.amzn2023.0.4                    amazonlinux                 648 k
 libX11-common                            noarch                 1.7.2-3.amzn2023.0.4                    amazonlinux                 152 k
 libXau                                   aarch64                1.0.9-6.amzn2023.0.2                    amazonlinux                  32 k
 libXext                                  aarch64                1.3.4-6.amzn2023.0.2                    amazonlinux                  40 k
 libXrender                               aarch64                0.9.10-14.amzn2023.0.2                  amazonlinux                  27 k
 libfontenc                               aarch64                1.1.3-15.amzn2023.0.2                   amazonlinux                  31 k
 libjpeg-turbo                            aarch64                2.1.4-2.amzn2023.0.5                    amazonlinux                 191 k
 libpng                                   aarch64                2:1.6.37-10.amzn2023.0.6                amazonlinux                 121 k
 libxcb                                   aarch64                1.13.1-7.amzn2023.0.2                   amazonlinux                 231 k
 mkfontscale                              aarch64                1.2.1-2.amzn2023.0.3                    amazonlinux                  33 k
 pixman                                   aarch64                0.40.0-3.amzn2023.0.3                   amazonlinux                 194 k
 ttmkfdir                                 aarch64                3.0.9-63.amzn2023.0.2                   amazonlinux                  51 k
 xml-common                               noarch                 0.6.3-56.amzn2023.0.2                   amazonlinux                  32 k
 xorg-x11-fonts-75dpi                     noarch                 7.5-31.amzn2023.0.2                     amazonlinux                 2.7 M
 xorg-x11-fonts-Type1                     noarch                 7.5-31.amzn2023.0.2                     amazonlinux                 500 k

Transaction Summary
===========================================================================================================================================
Install  25 Packages
</code></pre>
                    <p>試しています:</p>
                    <pre><code>[ec2-user@backoffice ~]$ wkhtmltopdf
/home/ec2-user/.rvm/gems/ruby-3.2.2/gems/wkhtmltopdf-binary-0.12.6.6/bin/wkhtmltopdf_centos_6_i386: /home/ec2-user/.rvm/gems/ruby-3.2.2/gems/wkhtmltopdf-binary-0.12.6.6/bin/wkhtmltopdf_centos_6_i386: cannot execute binary file
[ec2-user@backoffice ~]$ wkhtmltoimage
wkhtmltoimage: error while loading shared libraries: libpng15.so.15: cannot open shared object file: No such file or directory
[ec2-user@backoffice ~]$ which wkhtmltoimage
/usr/local/bin/wkhtmltoimage
[ec2-user@backoffice ~]$ cd /usr/local/bin/
[ec2-user@backoffice bin]$ ls
wkhtmltoimage  wkhtmltopdf
[ec2-user@backoffice bin]$ ./wkhtmltopdf
./wkhtmltopdf: error while loading shared libraries: libpng15.so.15: cannot open shared object file: No such file or directory
</code></pre>
                    <h2 id="解決策">解決策</h2>
                    <p>まだ解決策を探しているかどうかはわかりませんが、他の人を助けるためにここに残しておきます。</p>
                    <p>このソリューションは aarch64
                    を対象としたものではありませんが、aarch64
                    で動作するように変更できる可能性があります。
                    wkhtmltox は、Amazon Linux 2
                    マシンにデフォルトでインストールされるバージョンではない
                    openssl および libpng
                    の特定のバージョンに依存します。これを aarch64
                    で機能させるには、openssl、libpng、および wkhtmltox
                    を aarch64 バージョンに交換する必要があります。</p>
                    <pre><code>commands:
    01_install_dependencies: 
      command: yum install --assumeyes zlib fontconfig freetype libX11 libXext libXrender xorg-x11-fonts-75dpi xorg-x11-fonts-Type1
    02_install_libpng15: 
      command: yum localinstall -y https://repo.almalinux.org/almalinux/8/AppStream/x86_64/os/Packages/libpng15-1.5.30-7.el8.x86_64.rpm
    03_install_libssl10: 
      command: yum localinstall -y https://rpmfind.net/linux/centos/8-stream/AppStream/x86_64/os/Packages/compat-openssl10-1.0.2o-4.el8.x86_64.rpm
    04_install_wkhtmltox:
      command: yum localinstall -y https://github.com/wkhtmltopdf/packaging/releases/download/0.12.6-1/wkhtmltox-0.12.6-1.amazonlinux2.x86_64.rpm
</code></pre>
        </article>
    </div>
  </main>
  <footer>
    <div class="container">
        <p>&copy; 2024 Techioz. All rights reserved.</p>
    </div>
  </footer>
</body>
</html>