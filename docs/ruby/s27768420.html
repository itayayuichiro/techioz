<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="generator" content="pandoc">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
  <link rel="icon" href="../favicon.ico" />
  <link rel="stylesheet" href="../style.css">
  <title>Gem インストール エラー: 最初に開発ツールをインストールする必要があります (Windows) | Techioz</title>
  <style type="text/css">code{white-space: pre;}</style>
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1637770322917058"
     crossorigin="anonymous"></script>
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-DRM1ZRNLDN"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-DRM1ZRNLDN');
  </script>
<script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "Article",
  "headline": "Gem インストール エラー: 最初に開発ツールをインストールする必要があります (Windows)",
  "author": {
    "@type": "Person",
    "address": "",
    "email": null,
    "identifier": "masyumaroking",
    "name": "masyumaroking"
  },
  "publisher": {
    "@type": "Person",
    "name": "masyumaroking"
  }
}
</script>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
  <header>
    <div class="container">
        <h1>Techioz Blog</h1>
        <nav>
            <ul>
                <li><a href="#">Home</a></li>
                <li><a href="#">Articles</a></li>
                <li><a href="#">About</a></li>
                <li><a href="#">Contact</a></li>
            </ul>
        </nav>
    </div>
  </header>
  <main>
    <div class="container">
        <article>
                      <h2>Gem インストール エラー:
最初に開発ツールをインストールする必要があります (Windows)</h2>
                    <h2 id="概要">概要</h2>
                    <p>この質問は Windows に関するものです</p>
                    <p>gem ‘sinatra-websocket’
                    をインストールしようとしましたが、gem install
                    sinatra-websocket
                    を実行すると、このエラーが発生しました…</p>
                    <p>エラー: gem
                    ネイティブ拡張機能のビルドに失敗しました</p>
                    <p>… とともに …</p>
                    <pre><code>C:/Ruby193/bin/ruby.exe extconf.rb
checking for main() in -lc... *** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options.

Provided configuration options:
    --with-opt-dir
    --without-opt-dir
    --with-opt-include
    --without-opt-include=${opt-dir}/include
    --with-opt-lib
    --without-opt-lib=${opt-dir}/lib
    --with-make-prog
    --without-make-prog
    --srcdir=.
    --curdir
    --ruby=C:/Ruby193/bin/ruby
    --with-thin_parser-dir
    --without-thin_parser-dir
    --with-thin_parser-include
    --without-thin_parser-include=${thin_parser-dir}/include
    --with-thin_parser-lib
    --without-thin_parser-lib=${thin_parser-dir}/lib
    --with-clib
    --without-clib
C:/Ruby193/lib/ruby/1.9.1/mkmf.rb:381:in `try_do&#39;: The compiler failed to generate an executable file. (RuntimeError)
You have to install development tools first.
    from C:/Ruby193/lib/ruby/1.9.1/mkmf.rb:461:in `try_link0&#39;
    from C:/Ruby193/lib/ruby/1.9.1/mkmf.rb:476:in `try_link&#39;
    from C:/Ruby193/lib/ruby/1.9.1/mkmf.rb:619:in `try_func&#39;
    from C:/Ruby193/lib/ruby/1.9.1/mkmf.rb:845:in `block in have_library&#39;
    from C:/Ruby193/lib/ruby/1.9.1/mkmf.rb:790:in `block in checking_for&#39;
    from C:/Ruby193/lib/ruby/1.9.1/mkmf.rb:284:in `block (2 levels) in postpone&#39;
    from C:/Ruby193/lib/ruby/1.9.1/mkmf.rb:254:in `open&#39;
    from C:/Ruby193/lib/ruby/1.9.1/mkmf.rb:284:in `block in postpone&#39;
    from C:/Ruby193/lib/ruby/1.9.1/mkmf.rb:254:in `open&#39;
    from C:/Ruby193/lib/ruby/1.9.1/mkmf.rb:280:in `postpone&#39;
    from C:/Ruby193/lib/ruby/1.9.1/mkmf.rb:789:in `checking_for&#39;
    from C:/Ruby193/lib/ruby/1.9.1/mkmf.rb:840:in `have_library&#39;
    from extconf.rb:4:in `&lt;main&gt;&#39;
</code></pre>
                    <p>C:にある mkmf
                    ファイルは次のとおりです。uby\1.9.1hin-1.6.3hin_parser
                    は次のようになります。</p>
                    <pre><code>&quot;gcc -o conftest -IC:/Ruby193/include/ruby-1.9.1/i386-mingw32 -IC:/Ruby193/include/ruby-1.9.1/ruby/backward -IC:/Ruby193/include/ruby-1.9.1 -I. -DFD_SETSIZE=2048  -DFD_SETSIZE=2048  -O3 -fno-omit-frame-pointer -g -Wall -Wextra -Wno-unused-parameter -Wno-parentheses -Wno-long-long -Wno-missing-field-initializers -Wpointer-arith -Wwrite-strings -Wdeclaration-after-statement -Wimplicit-function-declaration conftest.c  -L. -LC:/Ruby193/lib -L.   -march=i486   -lmsvcrt-ruby191  -lshell32 -lws2_32 -limagehlp -lshlwapi  &quot;
checked program was:
/* begin */
1: #include &quot;ruby.h&quot;
2: 
3: #include &lt;winsock2.h&gt;
4: #include &lt;windows.h&gt;
5: int main(int argc, char **argv)
6: {
7:   return 0;
8: }
/* end */
</code></pre>
                    <p>Windows 7 を使用しています。</p>
                    <p>エラーが発生するのはなぜですか? 「Makefile
                    を作成できませんでした…」という行がありますが、これは関係ありますか?</p>
                    <h2 id="解決策">解決策</h2>
                    <p>Mac の場合:</p>
                    <p>システムに xcode
                    開発ツールがまだインストールされていない場合
                    (おそらく最近 OS または Xcode
                    をアップグレードした場合)、xcode-select –install
                    を実行します。</p>
                    <p>それ以外の場合、より侵襲的な修正は、 –switch
                    フラグを使用してアクティブ
                    ディレクトリを設定することです。</p>
                    <p>sudo xcode-select –switch /</p>
                    <p>xcode-select マニュアルから:</p>
                    <pre><code>  -s &lt;path&gt;, --switch &lt;path&gt;
          Sets the active developer directory to the given path, for example
          /Applications/Xcode-beta.app. This command must be run with
          superuser permissions (see sudo(8)), and will affect all users on
          the system. To set the path without superuser permissions or only
          for the current shell session, use the DEVELOPER_DIR environment
          variable instead (see ENVIRONMENT).
</code></pre>
                    <p>すでに Xcode
                    がインストールされている場合は、別の問題が発生する可能性があります。その場合は、この投稿「ネイティブ拡張機能を使用した
                    puma 5.6.2 のインストール Gem::Ext::BuildError:
                    ERROR: Failed to build」を参照してください。</p>
        </article>
    </div>
  </main>
  <footer>
    <div class="container">
        <p>&copy; 2024 Techioz. All rights reserved.</p>
    </div>
  </footer>
</body>
</html>