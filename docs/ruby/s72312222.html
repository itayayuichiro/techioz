<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="generator" content="pandoc">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
  <link rel="icon" href="../favicon.ico" />
  <link rel="stylesheet" href="../style.css">
  <title>Rails 6 Bootstrap v3.4.1、jQuery 1.12.4 のポップオーバー関数では、タイトルは表示されますが、本文は表示されません。 | Techioz</title>
  <style type="text/css">code{white-space: pre;}</style>
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1637770322917058"
     crossorigin="anonymous"></script>
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-DRM1ZRNLDN"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-DRM1ZRNLDN');
  </script>
<script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "Article",
  "headline": "Rails 6 Bootstrap v3.4.1、jQuery 1.12.4 のポップオーバー関数では、タイトルは表示されますが、本文は表示されません。",
  "author": {
    "@type": "Person",
    "address": "",
    "email": null,
    "identifier": "masyumaroking",
    "name": "masyumaroking"
  },
  "publisher": {
    "@type": "Person",
    "name": "masyumaroking"
  }
}
</script>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
  <header>
    <div class="container">
        <h1>Techioz Blog</h1>
        <nav>
            <ul>
                <li><a href="#">Home</a></li>
                <li><a href="#">Articles</a></li>
                <li><a href="#">About</a></li>
                <li><a href="#">Contact</a></li>
            </ul>
        </nav>
    </div>
  </header>
  <main>
    <div class="container">
        <article>
                      <h2>Rails 6 Bootstrap v3.4.1、jQuery 1.12.4
のポップオーバー関数では、タイトルは表示されますが、本文は表示されません。</h2>
                    <h2 id="概要">概要</h2>
                    <p>私は FILTERtrak
                    というアプリケーションを書き直していますが、今のところ順調に進んでいます。私はこれにサブスクリプション
                    モデルを追加し、あらゆる方法で強化し、Ruby と Rails
                    がとても好きになりました。元々は Ruby 2.2.2 と Rails
                    4.2 で書かれていました。 (最近) Ruby 2.7.2 と Rails
                    6.1.5 にアップグレードしました。 Bootstrap v3.4.1 と
                    jQuery 1.12.4
                    で実行しているアプリの両方のバージョン</p>
                    <p>私が遭遇し、解決した問題のうち、はるかに複雑なものは、あまりにもばかげているように思え、なぜそれが起こっているのか理解できないようです。</p>
                    <p>FILTERtrak の古いバージョンは依然として Heroku
                    上で稼働しています。まだアップグレード中のため、アプリをまだ新しいバージョンに切り替えていません。</p>
                    <p>古いバージョンのアプリでこのフィルター条件ガイド
                    ボタンにカーソルを置くと、ポップオーバーが正常に表示されます。このアプリの新しいバージョンでは、何らかの理由でまったく同じコードが表示され、タイトルだけが表示されますが、本文は表示されません??私にとって本当に混乱するのはどれですか？</p>
                    <p>つまり、Rails が動作し、JavaScript
                    が動作し、jQuery
                    が動作し、ブートストラップが動作していることがわかります。そうでない場合、ポップオーバー
                    タイトルは表示されません。コードが変更されていないのに、なぜタイトルでは機能し、本文では機能しないのでしょうか?!?</p>
                    <p>今日思いつく限りのことを試し、約1000回検索しました。ばかげているようですが、この小さな問題を解決できないようですが、アプリ内の他の場所でより多くのポップオーバーを使用する必要があるため、これを理解する必要があります。</p>
                    <p>APP
                    の別の領域に別のポップオーバーを書き込もうとしましたが、正常に動作しました。したがって、Ruby
                    on Rails
                    の新しいバージョンが原因でボディ部分が表示されないのか、それともそれが何なのかはわかりません。</p>
                    <p>私はフロントエンドに関してはまだあまり得意ではありません。
                    HAML に少し慣れ始めたところです。切り替えを処理する
                    HAML 行は、私には非常に複雑に思えます (.btn.btn-xs
                    で始まります)。何が起こっているのかをよく確認するために、いくつかのオンラインコンバーターを使用してその1行をHAMLからHTMLに変更しようとしましたが、どのコンバーターも正常に変換できませんでした。だからそれは運が悪いです。この行を自分で
                    HTML
                    に書き直しましたが、まったく同じ結果でした。そのため、それが
                    .btn.btn-xs で始まる HAML
                    行と関係があるかどうかはわかりません。それが書かれた方法でそのhaml行でまだ動作しているので、それが問題ではないと思いますが、試せることが長い間不足しています。</p>
                    <p>これはボタンのある HAML ビューです。
                    (ビューの関連部分と他のコードを含めているだけです。詳細を確認する必要がある場合は、お知らせください)。</p>
                    <pre><code>.text-center
  .btn.btn-xs.btn-block.btn-primary{data: { popover: { content: &quot;#condition-popover&quot; }, placement: &quot;top&quot;, toggle: &quot;popover&quot;, trigger: &quot;hover click&quot;}, tabindex: &quot;0&quot; } Filter Condition Guide
        #condition-popover.hidden
          .popover-heading
            What do the conditions mean?
          .popover-content
            %dl
              %dt Operational
              %dd
                %ul
                  %li No soot on outlet/bypass
                  %li No cracks
                  %li Wire test passes
              %dt Potentially Compromised
              %dd
                %ul
                  %li 0-20% soot on outlet/bypass
                  %li No cracks
                  %li Dents or impact damage
              %dt Compromised
              %dd
                %ul
                  %li 20%+ soot on outlet/bypass
                  %li Any cracks observed
                  %li Wire test fails
</code></pre>
                    <p>ここにJavaScript/jQueryファイルがあります</p>
                    <pre><code>(function() {
  var ready;

  ready = function() {
    $(&#39;[data-toggle=popover]&#39;).popover({
      container: &#39;body&#39;,
      html: true,
      content: function() {
        var content;
        content = $(this).attr(&#39;data-popover-content&#39;);
        return $(content).children(&#39;.popover-content&#39;).html();
      },
      title: function() {
        var title;
        title = $(this).attr(&#39;data-popover-content&#39;);
        return $(title).children(&#39;.popover-heading&#39;).html();
      }
    });
    return $(&#39;#service_filter_condition&#39;).on(&#39;change&#39;, function() {
      var selection;
      selection = $(this).val();
      switch (selection) {
        case &#39;operational&#39;:
          $(&#39;#customer_notified_container&#39;).fadeOut();
          break;
        case &#39;potentially_compromised&#39;:
          $(&#39;#customer_notified_container&#39;).fadeIn();
          break;
        case &#39;compromised&#39;:
          $(&#39;#customer_notified_container&#39;).fadeIn();
          break;
        default:
          $(&#39;#customer_notified_container&#39;).fadeOut();
      }
    });
  };

  $(document).ready(ready);

  $(document).on(&#39;turbolinks:load&#39;, ready);

}).call(this);
</code></pre>
                    <p>こちらが現在予定されているものの写真です。見出しが表示され、タイトル
                    セクションの正しいスタイルも設定されています。</p>
                    <p>以下は、古いバージョンのアプリで動作しているまったく同じコードの図です。</p>
                    <p>さらに不思議なのは、HTML
                    ページを調べてみると、データがすべてそこにあるということです。ボディセクションが切り替わらないだけで、なぜなのか理解できません。ボディが時々表示されない問題を解決できることがわかったので、さまざまな場所にcontainer:
                    ’body’を追加してみました。私が見つけることができた他の例はすべて、私のものと似ていませんでした。</p>
                    <p>他に何か見たい人がいたら教えてください。
                    この軽度の刺激物が発生する原因について、あらゆるご意見をいただければ幸いです。
                    いくつかの DB
                    クエリを書き直すのにかかる時間が短縮され、この小さな問題が修正され、気が狂いそうになりました。</p>
                    <p>ありがとう、 スコット</p>
                    <p>更新:
                    現在動作しているコードは次のとおりです。</p>
                    <p>JS</p>
                    <pre><code>(function() {
  var ready;

  ready = function() {
    $(&#39;[data-toggle=popover]&#39;).popover({
      html: true,
      trigger: &#39;hover click&#39;,
      placement: &#39;top&#39;,
      title: &#39;What do the conditions mean?&#39;,
      content: function() {
        return $(&#39;#popover-body&#39;).html();
        }
    });
    return $(&#39;#service_filter_condition&#39;).on(&#39;change&#39;, function() {
      var selection;
      selection = $(this).val();
      switch (selection) {
        case &#39;operational&#39;:
          $(&#39;#customer_notified_container&#39;).fadeOut();
          break;
        case &#39;potentially_compromised&#39;:
          $(&#39;#customer_notified_container&#39;).fadeIn();
          break;
        case &#39;compromised&#39;:
          $(&#39;#customer_notified_container&#39;).fadeIn();
          break;
        default:
          $(&#39;#customer_notified_container&#39;).fadeOut();
      }
    });
  };
</code></pre>
                    <p>ハムル:</p>
                    <pre><code> .btn.btn-xs.btn-block.btn-primary{&quot;data-toggle&quot;: &quot;popover&quot;, &quot;tabindex&quot;: &quot;0&quot;, &quot;html&quot;: &quot;true&quot; } Filter Condition Guide
          #popover-body.hidden{&quot;data-toggle&quot;: &quot;popover&quot;, &quot;html&quot;: &quot;true&quot;}
            = render &#39;filter_conditions_popover&#39;
</code></pre>
                    <p>正しく動作するようになりました。情報を部分的に、よりクリーンにしたいので、最終的にレンダリング
                    ラインを保持することにしました。また、読みやすいと思うので、書き直した
                    Javascript も保存しておきます。</p>
                    <h2 id="解決策">解決策</h2>
                    <p>バージョン 3.4
                    以降のブートストラップでは、ポップオーバーまたはツールチップ
                    コンテンツに表示される前に HTML
                    タグと属性がサニタイズされます。したがって、デフォルトのホワイトリストにタグと属性が存在しない場合は、必ずホワイトリストにタグと属性を追加してください。</p>
                    <p>デフォルトのホワイトリストはここにリストされています:
                    https://getbootstrap.com/docs/3.4/javascript/#js-sanitizer</p>
                    <p>ホワイトリストへの新しいタグは以下に追加できます。</p>
                    <p>//
                    ポップオーバー本文にタグを表示できるようにするには、デフォルトのホワイトリストに存在しないタグをホワイトリストに登録する必要があります。
                    //
                    現在、テーブルとその子はデフォルトではホワイトリストに登録されていません
                    //
                    したがって、他の必要なタグとともにテーブルタグを追加します</p>
                    <pre><code>var myDefaultWhiteList = $.fn.popover.Constructor.DEFAULTS.whiteList
myDefaultWhiteList.table = []
myDefaultWhiteList.tbody = []
myDefaultWhiteList.tr = []
myDefaultWhiteList.td = []
myDefaultWhiteList.th = []
</code></pre>
                    <p>// タグ属性を許可するには、次のように追加できます
                    myDefaultWhiteList.td = [‘データオプション’]</p>
                    <p>タグを追加して、ポップオーバー本文に HTML
                    コンテンツを表示することもできます。</p>
        </article>
    </div>
  </main>
  <footer>
    <div class="container">
        <p>&copy; 2024 Techioz. All rights reserved.</p>
    </div>
  </footer>
</body>
</html>