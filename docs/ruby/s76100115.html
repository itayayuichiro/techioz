<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="generator" content="pandoc">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
  <link rel="icon" href="../favicon.ico" />
  <link rel="stylesheet" href="../style.css">
  <title>rbenv を使用して ubuntu 22.01 に Ruby 2.3.1 をインストールできない | Techioz</title>
  <style type="text/css">code{white-space: pre;}</style>
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1637770322917058"
     crossorigin="anonymous"></script>
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-DRM1ZRNLDN"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-DRM1ZRNLDN');
  </script>
<script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "Article",
  "headline": "rbenv を使用して ubuntu 22.01 に Ruby 2.3.1 をインストールできない",
  "author": {
    "@type": "Person",
    "address": "",
    "email": null,
    "identifier": "masyumaroking",
    "name": "masyumaroking"
  },
  "publisher": {
    "@type": "Person",
    "name": "masyumaroking"
  }
}
</script>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
  <header>
    <div class="container">
        <h1>Techioz Blog</h1>
        <nav>
            <ul>
                <li><a href="#">Home</a></li>
                <li><a href="#">Articles</a></li>
                <li><a href="#">About</a></li>
                <li><a href="#">Contact</a></li>
            </ul>
        </nav>
    </div>
  </header>
  <main>
    <div class="container">
        <article>
                      <h2>rbenv を使用して ubuntu 22.01 に Ruby 2.3.1
をインストールできない</h2>
                    <h2 id="概要">概要</h2>
                    <p>rbenv を使用して ubuntu 22.01 に Ruby 2.3.1
                    をインストールできないと、次のようなエラー応答が表示されます。</p>
                    <pre><code>vidur@Vidur-PC:~/rails_apps/Connectivity-Web$ rbenv install 2.3.0
To follow progress, use &#39;tail -f /tmp/ruby-build.20230425154726.452387.log&#39; or pass --verbose
Downloading openssl-1.0.2u.tar.gz...
-&gt; https://dqw8nmjcqpjn7.cloudfront.net/ecd0c6ffb493dd06707d38b14bb4d8c2288bb7033735606569d8f90f89669d16
Installing openssl-1.0.2u...
Installed openssl-1.0.2u to /home/vidur/.rbenv/versions/2.3.0

Downloading ruby-2.3.0.tar.bz2...
-&gt; https://cache.ruby-lang.org/pub/ruby/2.3/ruby-2.3.0.tar.bz2
Installing ruby-2.3.0...

WARNING: ruby-2.3.0 is past its end of life and is now unsupported.
It no longer receives bug fixes or critical security updates.


BUILD FAILED (Ubuntu 22.10 using ruby-build 20230424)

Inspect or clean up the working tree at /tmp/ruby-build.20230425154726.452387.KXKRoa
Results logged to /tmp/ruby-build.20230425154726.452387.log

Last 10 log lines:
    /tmp/ruby-build.20230425154726.452387.KXKRoa/ruby-2.3.0/lib/rdoc/store.rb:749:in `save&#39;
    /tmp/ruby-build.20230425154726.452387.KXKRoa/ruby-2.3.0/lib/rdoc/generator/ri.rb:27:in `generate&#39;
    /tmp/ruby-build.20230425154726.452387.KXKRoa/ruby-2.3.0/lib/rdoc/rdoc.rb:535:in `block in generate&#39;
    /tmp/ruby-build.20230425154726.452387.KXKRoa/ruby-2.3.0/lib/rdoc/rdoc.rb:530:in `chdir&#39;
    /tmp/ruby-build.20230425154726.452387.KXKRoa/ruby-2.3.0/lib/rdoc/rdoc.rb:530:in `generate&#39;
    /tmp/ruby-build.20230425154726.452387.KXKRoa/ruby-2.3.0/lib/rdoc/rdoc.rb:513:in `document&#39;
    ./bin/rdoc:20:in `&lt;main&gt;&#39;


make: *** [uncommon.mk:442: rdoc] Error 1
</code></pre>
                    <p>可能な解決策を提案してください、事前に感謝します。</p>
                    <pre><code>File looks like:

   99% [939/945]  vm_dump.c
 99% [940/945]  vm_eval.c
 99% [941/945]  vm_exec.c
 99% [942/945]  vm_insnhelper.c
 99% [943/945]  vm_method.c
 99% [944/945]  vm_trace.c
100% [945/945]  vsnprintf.c

Generating RI format into /tmp/ruby-build.20230425170734.32179.NAWMdR/ruby-2.3.1/.ext/rdoc...
Marshal.dump reentered at marshal_dump
/tmp/ruby-build.20230425170734.32179.NAWMdR/ruby-2.3.1/lib/rdoc/store.rb:866:in `dump&#39;
    /tmp/ruby-build.20230425170734.32179.NAWMdR/ruby-2.3.1/lib/rdoc/store.rb:866:in `save_class&#39;
    /tmp/ruby-build.20230425170734.32179.NAWMdR/ruby-2.3.1/lib/rdoc/store.rb:750:in `block in save&#39;
    /tmp/ruby-build.20230425170734.32179.NAWMdR/ruby-2.3.1/lib/rdoc/store.rb:749:in `each&#39;
    /tmp/ruby-build.20230425170734.32179.NAWMdR/ruby-2.3.1/lib/rdoc/store.rb:749:in `save&#39;
    /tmp/ruby-build.20230425170734.32179.NAWMdR/ruby-2.3.1/lib/rdoc/generator/ri.rb:27:in `generate&#39;
    /tmp/ruby-build.20230425170734.32179.NAWMdR/ruby-2.3.1/lib/rdoc/rdoc.rb:535:in `block in generate&#39;
    /tmp/ruby-build.20230425170734.32179.NAWMdR/ruby-2.3.1/lib/rdoc/rdoc.rb:530:in `chdir&#39;
    /tmp/ruby-build.20230425170734.32179.NAWMdR/ruby-2.3.1/lib/rdoc/rdoc.rb:530:in `generate&#39;
    /tmp/ruby-build.20230425170734.32179.NAWMdR/ruby-2.3.1/lib/rdoc/rdoc.rb:513:in `document&#39;
    ./bin/rdoc:20:in `&lt;main&gt;&#39;


make: *** [uncommon.mk:442: rdoc] Error 1
</code></pre>
                    <h2 id="解決策">解決策</h2>
                    <p><span class="citation"
                    data-cites="benj-p">@benj-p</span>
                    がコメントで指摘したように、クラッシュは rdoc
                    で発生します。</p>
                    <p>rdoc を無効にすると、2.3.1 (および 2.3.2 と
                    2.3.3) でこの問題が修正されます。</p>
                    <p>RUBY_CONFIGURE_OPTS=–disable-install-doc rbenv
                    インストール</p>
                    <p>詳細については、ruby-build
                    リポジトリでこれを紹介および説明するスレッドを参照してください。</p>
        </article>
    </div>
  </main>
  <footer>
    <div class="container">
        <p>&copy; 2024 Techioz. All rights reserved.</p>
    </div>
  </footer>
</body>
</html>